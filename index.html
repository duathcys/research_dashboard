<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>2026 연구 전략 내비게이터</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
</head>
<body>

<div class="dashboard">
    <header><h1>🚀 Research Intelligence 2026</h1></header>

    <!-- 탭 메뉴 -->
    <nav class="tab-menu">
        <button class="tab-btn active" data-tab="matrix-tab">📊 전략 매트릭스</button>
        <button class="tab-btn" data-tab="list-tab">📈 성장/쇠퇴 리스트</button>
        <button class="tab-btn" data-tab="relation-tab">🗂️ 연관어 TOP10</button>
        <button class="tab-btn" data-tab="sankey-tab">🌊 TOP5 키워드 흐름</button>
    </nav>

    <!-- 매트릭스 탭 -->
    <div id="matrix-tab" class="tab-item active">
        <div class="card">
            <h3>2026 키워드 포지셔닝</h3>

            <!-- 키워드 필터 토글 -->
            <button id="keyword-filter-btn" class="filter-toggle">✅ 키워드 필터 ON</button>

            <div class="matrix-wrapper">
                <div class="axis-label y-label">↑ 성장률 (Growth Rate)</div>
                <div class="axis-label x-label">예측 빈도 (Frequency) →</div>

                <div class="matrix-grid">
                    <div class="quad q2">신규 유망 (Low Freq / High Growth)</div>
                    <div class="quad q1">핵심 전략 (High Freq / High Growth)</div>
                    <div class="quad q4">특화/정체 (Low Freq / Low Growth)</div>
                    <div class="quad q3">성숙/유지 (High Freq / Low Growth)</div>
                </div>
                <div id="matrix-points"></div>
            </div>
        </div>
    </div>

    <!-- 리스트 탭 -->
    <div id="list-tab" class="tab-item">
        <div class="card list-container">

            <!-- 성장 리스트 -->
            <div class="list-group">
                <h3>📈 성장 (Growth > 0)</h3>
                <div class="sort-controls">
                    <button class="sort-btn" data-list="growth" data-type="value">성장률 ↓</button>
                    <button class="sort-btn" data-list="growth" data-type="name">이름 ↑</button>
                </div>
                <ul id="growth-list"></ul>
            </div>

            <!-- 쇠퇴 리스트 -->
            <div class="list-group">
                <h3>📉 쇠퇴 (Growth < 0)</h3>
                <div class="sort-controls">
                    <button class="sort-btn" data-list="decline" data-type="abs">쇠퇴율 ↓</button>
                    <button class="sort-btn" data-list="decline" data-type="name">이름 ↑</button>
                </div>
                <ul id="decline-list"></ul>
            </div>

        </div>
    </div>
    <!-- 연관어 TOP10 탭 -->
    <div id="relation-tab" class="tab-item">
        <div class="card">
            <h3>연관어 TOP10 (연도별)</h3>

            <!-- 키워드 + 연도 선택 -->
            <div class="keyword-selector">
                <label for="key-select">키워드 선택: </label>
                <select id="key-select"></select>

                <label for="relation-year-select">연도 선택: </label>
                <select id="relation-year-select">
                    <option value="2021">2021</option>
                    <option value="2022">2022</option>
                    <option value="2023">2023</option>
                    <option value="2024">2024</option>
                    <option value="2025">2025</option>
                </select>
            </div>

            <!-- 카드형 그리드 -->
            <div class="relation-grid" id="relation-cards">
                <!-- JS로 TOP10 카드 자동 생성 -->
            </div>

            <!-- 히트맵 + 라인차트 -->
            <section class="card relation-analysis">
                <h3>🔍 주요 키워드별 연관어 변화 추이 (2022-2026)</h3>
                <p class="guide-text">
                    ※ 칸이 비어있는 연도는 해당 키워드가 연관 TOP 10에 포함되지 않은 시기입니다.
                </p>
                
                <div class="heatmap-wrapper">
                    <table class="heatmap-table">
                        <thead>
                            <tr>
                                <th>연관 키워드</th>
                                <th>2022</th>
                                <th>2023</th>
                                <th>2024</th>
                                <th>2025</th>
                                <th class="current-year">2026 (예측)</th>
                                <th>유형</th>
                            </tr>
                        </thead>
                        <tbody id="heatmap-body">
                            <!-- JS로 데이터 렌더링 -->
                        </tbody>
                    </table>
                </div>

                <div id="linechart-container" style="margin-top:20px;">
                    <h4>선택 키워드 연도별 변화</h4>
                    <div id="linechart" style="height: 350px;"></div>
                </div>
            </section>

        </div>
    </div>
</div>

<!-- 키워드 상세 팝업 -->
<div id="keyword-popup" class="popup">
    <div class="popup-content">
        <button id="popup-close" class="popup-close">✖</button>
        <h2 id="popup-title"></h2>
        <p id="popup-details"></p>
    </div>
</div>
<script src="https://cdn.plot.ly/plotly-2.29.1.min.js"></script>
<script src="script.js"></script>
<script src="heatmap.js"></script>

</body>
</html>
