<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>IT-da 2026: 미래 연구를 잇는 내비게이터</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
</head>
<body>

<div class="dashboard">
    <header><h1>연구의 과거와 현재, 그리고 미래를 잇다</h1></header>

    <!-- 탭 메뉴 -->
    <nav class="tab-menu">
        <button class="tab-btn active" data-tab="matrix-tab">📊 위치 잇다</button>
        <button class="tab-btn" data-tab="list-tab">📈 흐름 잇다</button>
        <button class="tab-btn" data-tab="relation-tab">🗂️ 맥락 잇다</button>
        <button class="tab-btn" data-tab="cluster-tab">🧩 무리지어 잇다</button>
        <button class="tab-btn" data-tab="diffusion-tab">🌊 세상을 잇다</button>
    </nav>

    <!-- 매트릭스 탭 -->
    <div id="matrix-tab" class="tab-item active">
        <div class="card">
            <h3>2026 키워드 포지셔닝</h3>

            <!-- 키워드 필터 토글 -->
            <button id="keyword-filter-btn" class="filter-toggle">✅ 키워드 필터 ON</button>

            <div class="matrix-wrapper">
                <div class="axis-label y-label">↑ 성장률 (Growth Rate)</div>
                <div class="axis-label x-label">예측 빈도 (Frequency) →</div>

                <div class="matrix-grid">
                    <div class="quad q2">신규 유망 (Low Freq / High Growth)</div>
                    <div class="quad q1">핵심 전략 (High Freq / High Growth)</div>
                    <div class="quad q4">특화/정체 (Low Freq / Low Growth)</div>
                    <div class="quad q3">성숙/유지 (High Freq / Low Growth)</div>
                </div>
                <div id="matrix-points"></div>
            </div>
        </div>
    </div>

    <!-- 리스트 탭 -->
    <div id="list-tab" class="tab-item">
        <div class="card list-container">

            <!-- 성장 리스트 -->
            <div class="list-group">
                <h3>📈 성장 (Growth > 0)</h3>
                <div class="sort-controls">
                    <button class="sort-btn" data-list="growth" data-type="value">성장률 ↓</button>
                    <button class="sort-btn" data-list="growth" data-type="name">이름 ↑</button>
                </div>
                <ul id="growth-list"></ul>
            </div>

            <!-- 쇠퇴 리스트 -->
            <div class="list-group">
                <h3>📉 쇠퇴 (Growth < 0)</h3>
                <div class="sort-controls">
                    <button class="sort-btn" data-list="decline" data-type="abs">쇠퇴율 ↓</button>
                    <button class="sort-btn" data-list="decline" data-type="name">이름 ↑</button>
                </div>
                <ul id="decline-list"></ul>
            </div>

        </div>
    </div>
    <!-- 연관어 TOP10 탭 -->
    <div id="relation-tab" class="tab-item">
        <div class="card">
            <h3>🗂️ 연관어 TOP10</h3>

            <!-- 키워드 + 연도 선택 -->
            <div class="keyword-selector">
                <div class="select-group">
                    <label for="key-select">키워드 선택</label>
                    <select id="key-select"></select>
                </div>

                <div class="select-group">
                    <label for="relation-year-select">연도 선택</label>
                    <select id="relation-year-select">
                        <option value="2021">2021</option>
                        <option value="2022">2022</option>
                        <option value="2023">2023</option>
                        <option value="2024">2024</option>
                        <option value="2025">2025</option>
                    </select>
                </div>
            </div>

            <!-- 카드형 그리드 -->
            <div class="relation-grid" id="relation-cards">
                <!-- JS로 TOP10 카드 자동 생성 -->
            </div>

            <!-- 히트맵 + 라인차트 -->
            <section class="card relation-analysis">
                <h3>🔍 주요 키워드별 연관어 변화 추이 (2021-2025)</h3>
                <p class="guide-text">
                    ※ 칸이 비어있는 연도는 해당 키워드가 연관 TOP 10에 포함되지 않은 시기입니다.
                </p>
                
                <div class="heatmap-wrapper">
                    <table class="heatmap-table">
                        <thead>
                            <tr>
                                <th class="kw-col">연관 키워드</th>
                                <th>2021</th>
                                <th>2022</th>
                                <th>2023</th>
                                <th>2024</th>
                                <th>2025</th>
                                <th class="type-col">유형</th>
                            </tr>
                        </thead>
                        <tbody id="heatmap-body">
                            <!-- JS로 데이터 렌더링 -->
                        </tbody>
                    </table>
                </div>

                <div id="linechart-container">
                    <h3>📈 선택 키워드 연도별 변화</h3>
                    <div id="linechart"></div>
                </div>
            </section>

        </div>
    </div>
    
    <!-- 클러스터 맵 탭 -->
    <div id="cluster-tab" class="tab-item">
        <div class="card">
            <h3>🧩 연구 클러스터 맵</h3>
            <p class="guide-text" style="font-size: 14px; color: #555; margin-bottom: 15px;">
                <strong>💡 버블 차트 읽는 법:</strong><br>
                • <strong style="color: #007aff;">버블 크기</strong> = 2025년 연구 빈도 (클수록 더 많이 연구됨)<br>
                • <strong style="color: #2e7d32;">색상</strong> = 연구 분야 카테고리<br>
                • <strong style="color: #d32f2f;">위치</strong> = 가로축(평균 빈도) × 세로축(성장률)<br>
                • 클릭하면 상세 정보를 볼 수 있습니다
            </p>
            
            <!-- 카테고리 필터 -->
            <div class="cluster-filters">
                <button class="filter-chip active" data-category="all">전체</button>
                <button class="filter-chip" data-category="tech">🔵 Tech</button>
                <button class="filter-chip" data-category="policy">🟢 Policy</button>
                <button class="filter-chip" data-category="society">🟣 Society</button>
                <button class="filter-chip" data-category="environment">🟠 Environment</button>
                <button class="filter-chip" data-category="economy">🟡 Economy</button>
            </div>
            
            <!-- 클러스터 버블 차트 -->
            <div id="cluster-bubble-chart"></div>
            
            <!-- 메인 키워드별 클러스터 연결 -->
            <div class="card cluster-network-section">
                <h3>🔗 메인 키워드 × 클러스터 연결도</h3>
                
                <div class="select-group">
                    <label for="main-keyword-select">메인 키워드 선택</label>
                    <select id="main-keyword-select">
                        <option value="artificial intelligence">artificial intelligence</option>
                        <option value="covid-19">covid-19</option>
                        <option value="esg">esg</option>
                        <option value="digital">digital</option>
                        <option value="policy">policy</option>
                        <option value="rights">rights</option>
                        <option value="protection">protection</option>
                        <option value="korea">korea</option>
                        <option value="china">china</option>
                        <option value="international">international</option>
                        <option value="information">information</option>
                        <option value="labor">labor</option>
                        <option value="management">management</option>
                        <option value="trust">trust</option>
                    </select>
                </div>
                
                <!-- 연결된 클러스터 카드 -->
                <div id="linked-clusters-grid" class="linked-clusters-grid">
                    <!-- JS로 동적 생성 -->
                </div>
                
                <!-- 클러스터별 성장 추이 차트 -->
                <div id="cluster-trend-chart"></div>
            </div>
        </div>
    </div>
    
    <!-- 분야 확산 탭 -->
    <div id="diffusion-tab" class="tab-item">
        <div class="card">
            <h3>🌊 분야 확산 패턴 (2021-2025)</h3>
            <p class="guide-text" style="font-size: 14px; color: #555; margin-bottom: 20px;">
                <strong>💡 Sankey Diagram 읽는 법:</strong><br>
                • 왼쪽부터 오른쪽으로 <strong>2021년 → 2025년</strong>까지 연구 분야의 이동 흐름을 보여줍니다<br>
                • <strong>선의 두께</strong> = 분야 간 이동한 연구의 빈도<br>
                • 예: "교육학(2021) → 사회학(2022)" 선이 두꺼우면 교육학에서 사회학으로 많이 확산됨
            </p>
            
            <!-- 클러스터 선택 -->
            <div class="keyword-selector">
                <div class="select-group" style="max-width: 400px;">
                    <label for="diffusion-cluster-select">📌 클러스터 선택</label>
                    <select id="diffusion-cluster-select">
                        <!-- JS로 동적 생성 -->
                    </select>
                </div>
            </div>
            
            <!-- Sankey Diagram -->
            <div class="card" style="margin-top: 20px; padding: 30px;">
                <h4>📊 분야 간 이동 흐름 (2021→2022→2023→2024→2025)</h4>
                <div id="diffusion-sankey" style="width: 100%; height: 600px;"></div>
            </div>
            
            <!-- 분야 분포 변화 -->
            <div class="card" style="margin-top: 20px; padding: 30px;">
                <h4>📈 연도별 분야 분포 변화</h4>
                <div id="field-distribution-chart" style="width: 100%; height: 400px;"></div>
            </div>
            
            <!-- 다양성 지수 -->
            <div class="card" style="margin-top: 20px; padding: 30px;">
                <h4>📊 분야 다양성 추이</h4>
                <p class="guide-text">분야 다양성 지수(Entropy)가 높을수록 여러 분야에 골고루 확산되었음을 의미합니다.</p>
                <div id="diversity-chart" style="width: 100%; height: 300px;"></div>
            </div>
        </div>
    </div>
</div>

<!-- 키워드 상세 팝업 -->
<div id="keyword-popup" class="popup">
    <div class="popup-content">
        <button id="popup-close" class="popup-close">✖</button>
        <h2 id="popup-title"></h2>
        <p id="popup-details"></p>
    </div>
</div>
<script src="https://cdn.plot.ly/plotly-2.29.1.min.js"></script>
<script src="script.js"></script>

</body>
</html>